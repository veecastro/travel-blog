<%- include('../partials/header') %>

<h2>New Destination</h2>
<form action="/destinations" method="POST" class="destination-form">
  <div class="mb-3">
    <label for="country" class="form-label">Country</label>
    <input
      type="text"
      name="country"
      id="country"
      class="form-control"
      required
    />
  </div>

  <div class="mb-3">
    <label for="city" class="form-label">City</label>
    <input type="text" name="city" id="city" class="form-control" required />
  </div>

  <div class="mb-3">
    <label for="date" class="form-label">Date</label>
    <input type="date" name="date" id="date" class="form-control" required />
  </div>

  <!-- <div class="mb-3">
    <label for="image" class="form-label">Photo</label>
    <input type="text" name="image" id="image" class="form-control" required />
  </div> -->

  <h3>Photos</h3>
  <div id="photos-container">
    <div class="photo-form">
      <label for="photo-image-0" class="form-label">Photo URL</label>
      <input
        type="text"
        name="photos[0][image]"
        id="photo-image-0"
        class="form-control"
        required
      />
      <br />
      <label for="photo-caption-0" class="form-label">Caption</label>
      <input
        type="text"
        name="photos[0][caption]"
        id="photo-caption-0"
        class="form-control"
        required
      />
      <br />
    </div>
  </div>
  <button type="button" onclick="addPhoto()" class="btn btn-primary">
    Add Photo
  </button>
  <br />
  <script>
    function addPhoto() {
      const photosContainer = document.getElementById("photos-container");

      // Create a new photo form element
      const photoForm = document.createElement("div");
      photoForm.className = "photo-form";

      // Generate unique IDs for the new input fields
      const index = photosContainer.getElementsByClassName("photo-form").length;
      const imageId = `photo-image-${index}`;
      const captionId = `photo-caption-${index}`;

      // Create the photo URL input field
      const imageLabel = document.createElement("label");
      imageLabel.setAttribute("for", imageId);
      imageLabel.className = "form-label";
      imageLabel.textContent = "Photo URL";

      const imageInput = document.createElement("input");
      imageInput.setAttribute("type", "text");
      imageInput.setAttribute("name", `photos[${index}][image]`);
      imageInput.setAttribute("id", imageId);
      imageInput.className = "form-control";
      imageInput.required = true;

      // Create the caption input field
      const captionLabel = document.createElement("label");
      captionLabel.setAttribute("for", captionId);
      captionLabel.className = "form-label";
      captionLabel.textContent = "Caption";

      const captionInput = document.createElement("input");
      captionInput.setAttribute("type", "text");
      captionInput.setAttribute("name", `photos[${index}][caption]`);
      captionInput.setAttribute("id", captionId);
      captionInput.className = "form-control";
      captionInput.required = true;

      // Append the input fields to the photo form element
      photoForm.appendChild(imageLabel);
      photoForm.appendChild(imageInput);
      photoForm.appendChild(document.createElement("br"));
      photoForm.appendChild(captionLabel);
      photoForm.appendChild(captionInput);
      photoForm.appendChild(document.createElement("br"));

      // Append the photo form element to the photos container
      photosContainer.appendChild(photoForm);
    }
  </script>

  <!-- <h2>New Destination</h2>
<form action="/destinations" method="POST" class="edit-form">
  
  <label for="country">Country</label>
  <input type="text" name="country" id="country" required />
  <br />
  <label for="city">City</label>
  <input type="text" name="city" id="city" required />
  <br />
  <label for="date">Date</label>
  <input type="date" name="date" id="date" required />
  <br />
  <label for="image">Image URL</label>
  <input type="text" name="image" id="image" required />
  <br /> -->

  <!-- <h3>Activities</h3>
  <div id="activities-container">
    <div class="activity">
      <label for="activity-name-0">Name</label>
      <input type="text" name="activities[0][name]" id="activity-name-0" required />
      <br />
      <label for="activity-type-0">Type</label>
      <input type="text" name="activities[0][type]" id="activity-type-0" required />
      <br />

      <label for="activity-image-0">Image URL</label>
      <input type="text" name="activities[0][image]" id="activity-image-0" required />
      <br />
    </div>
  </div>
  <button type="button" onclick="addActivity()">Add Activity</button>
  <br />

  <h3>Photos</h3>
  <div id="photos-container">
    <div class="photo">
      <label for="photo-image-0">Image URL</label>
      <input type="text" name="photos[0][image]" id="photo-image-0" required />
      <br />
      <label for="photo-caption-0">Caption</label>
      <input type="text" name="photos[0][caption]" id="photo-caption-0" required />
      <br />
    </div>
  </div>
  <button type="button" onclick="addPhoto()">Add Photo</button>
  <br />

  <h3>Travel Tips</h3>
  <div id="tips-container">
    <div class="tip">
      <label for="tip-0">Tip</label>
      <input type="text" name="tips[0][tip]" id="tip-0" required />
      <br />
    </div>
  </div>
  <button type="button" onclick="addTip()">Add Tip</button>
  <br />

  <h3>Foods</h3>
  <div id="foods-container">
    <div class="food">
      <label for="food-name-0">Name</label>
      <input type="text" name="foods[0][name]" id="food-name-0" required />
      <br />
      <label for="food-cuisine-0">Cuisine</label>
      <input type="text" name="foods[0][cuisine]" id="food-cuisine-0" required />
        <br />
        <label for="food-image-0">Image URL</label>
        <input type="text" name="foods[0][image]" id="food-image-0" required />
        <br />
        </div>
        </div>
        <button type="button" onclick="addFood()">Add Food</button>
        <br /> -->

  <button type="submit" class="btn btn-create">Create Destination</button>
</form>
<!-- <button type="submit">Create Destination</button>
        </form> -->

<%- include('../partials/footer') %>
<!-- <script>
        let activityCount = 1;
        let photoCount = 1;
        let tipCount = 1;
        let foodCount = 1; -->
